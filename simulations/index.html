<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Simulations - streamOS</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Simulations";
        var mkdocs_page_input_path = "simulations.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> streamOS
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Platform</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../bot/">The streamOS Bot</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Simulations</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../integrations/">Integrations</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../reconciliation/">Reconciliation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../overview/">Object Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../customer/">Customer Object</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../product/">Product Object</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Contracts</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../contracts/">Contract Types</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../plans/">Plans</a>
                </li>
                <li class="toctree-l2"><a class="" href="../modifiers.md">Modifiers</a>
                </li>
                <li class="toctree-l2"><a class="" href="../billing.md">Billing Frequency</a>
                </li>
                <li class="toctree-l2"><a class="" href="../contract_examples.md">Examples</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../usage/">Usage Object</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../invoice/">Invoice Object</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../users/">Users</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../c2c/">Use Case - Contract2Cash</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../marketplace.md">Use Case - Marketplace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ & How-To</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Developer Documentation</a>
    <ul>
                <li class="toctree-l2"><a class="" href="https://api.streamos.io/swagger-ui">Swagger</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../api-howto/">How-To & Sample Code</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tos/">Terms of Service</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../privacy.md">Privacy Policy</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">streamOS</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Platform</li>
      <li class="breadcrumb-item active">Simulations</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p><img alt="Simulation" src="../img/Simulate.png" /></p>
<p>Simulations are currently available only for developer API users (Human users will have access to a user friendly version shortly, please stay up to date by following <a href="https://www.linkedin.com/company/stream-os/">streamOS</a> for product updates)</p>
<ol>
<li><strong>How simulations are setup ?</strong></li>
<li><strong>Running simulations</strong></li>
<li><strong>Viewing Results</strong></li>
</ol>
<p><em>Use the code here <a href="../api-howto/#sample-code">Sample Code</a> and run them against the /sim/... endpoints</em></p>
<h3 id="how-simluations-are-setup">How simluations are setup ?</h3>
<p>Simulation environments bootstrap with all contracts, customers and products from your production environment. </p>
<p>The /sim <a href="https://api.streamos.io/swagger-ui/#/default">endpoints</a> are simulation events and perform the same work as described in other sections except that they do not store data in production and are ephemeral (state recycles around system restarts etc.). Although our systems are largely up, state will be reset around system upgrades and catastrophical updates (like AWS going down)</p>
<h3 id="running-simulations">Running simulations</h3>
<p>Running simulations are almost exactly like working in a production environment except for a few changes - </p>
<ol>
<li>Usage: do not upload usage as you would regularly to your usage endpoint - instead structure your usage dataframe and pass it directly in to the /run endpoint as referenced <a href="https://api.streamos.io/swagger-ui/#/default/post_sim_contracts__organization_id__factory_run">here</a> </li>
</ol>
<pre><code>response = client.post(f'/contracts/{org_id}/factory/run', json={'usage': [{'date': '2024-02-29', 'product_id': product_id, 'contract_id': product_contract_id, 'quantity': 100}] })

customer_id: Specify the customer_id of the customer you would like to run the contracts for 
contract_id: Specify the contract_id of the contract you would like to run 

Please ensure that the contract_id in the usage schema is the contract_id of the Product Contract that wraps that product referenced.
</code></pre>
<h3 id="viewing-results">Viewing Results</h3>
<p>Results of simulations are returned from <a href="https://api.streamos.io/swagger-ui/#/default/get_sim_contracts__organization_id__factory_charges">here</a>. </p>
<p>This is a pandas.multiindex dataframe once unpacked - with column headers reflecting each level of the contract that produces results:   </p>
<pre><code>**index:** datetime index of charges events   
**columns:**    [Parent Contract Info]  
                [Sub Contract Info]  [total amount of parent]  
                [Plan Info] [total amount of sub contract]  
                [unit amount] [quantity] [total amount]  
</code></pre>
<p>The way to process this information is to unwrap columns at each level and process the remaining dataframe to inspect details of how the prices were created.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../bot/" class="btn btn-neutral float-left" title="The streamOS Bot"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../integrations/" class="btn btn-neutral float-right" title="Integrations">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../bot/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../integrations/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
